# Командный интерпретатор


Bash - это основной класс, который при создании получает Parser и Map[String, Program]
Здесь Program - это действие над потоком данных (Stream[String]).

Интерпретация строчки состоит из двух частей:

Сначала Parser преобразует строку к виду List[(Operation, List[Argument])].
Operation - это или присвоение, или действие которое надо выполнить.
Argument - интерфейс аргумента, который получая контекст(переменные окружения...) должен вернуть строку.

После этого команды в списке выполняются слева направо.
Каждая следующая команда получает на вход результат предыдущей.

Паттерны в коде:
Использование case class => синглтон(объект компаньон) и фабричный метод(функция конструктор).
Класс Bash - посредник, в каком то смысле. Выход пердыдущей команды передается на вход следующей. Но все это происходит через Bash и команды не знают друг о друге.
Часть команд - это адаптеры для стандартной библиотеки.
Пока команда не будет вызвана - она хранится как имя и набор аргументов. Это своеобразный паттерн команда.
Все колеекции абстрагируют доступ к ним через методы типа map - это аналогия итератора.
Bash реализует dependecy injection через конструктор, принимая парсер по интерфейсу.
